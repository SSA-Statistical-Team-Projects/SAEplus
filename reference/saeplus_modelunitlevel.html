<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function prepares remote sensing data for imputation by checking the admin level shapefiles for geometric
consistency. Prior to the imputation, an algorithm is used to select an appropriate set of variables that best
predicts the outcome variable. The household survey data is used to create a synthetic census of households.
The empirical best predictor is estimated using the household survey data and is used as the basis for imputation
into the synthetic census."><title>Estimate the unit level model — saeplus_modelunitlevel • SAEplus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Estimate the unit level model — saeplus_modelunitlevel"><meta property="og:description" content="This function prepares remote sensing data for imputation by checking the admin level shapefiles for geometric
consistency. Prior to the imputation, an algorithm is used to select an appropriate set of variables that best
predicts the outcome variable. The household survey data is used to create a synthetic census of households.
The empirical best predictor is estimated using the household survey data and is used as the basis for imputation
into the synthetic census."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SAEplus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/intro.html">What is SAEplus?</a>
    <a class="dropdown-item" href="../articles/tesselateashapefile.html">Build a Poverty Map with SAEplus</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/SSA-Statistical-Team-Projects/SAEplus/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Estimate the unit level model</h1>
      <small class="dont-index">Source: <a href="https://github.com/SSA-Statistical-Team-Projects/SAEplus/blob/HEAD/R/saeplus_modelunitlevel.R" class="external-link"><code>R/saeplus_modelunitlevel.R</code></a></small>
      <div class="d-none name"><code>saeplus_modelunitlevel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function prepares remote sensing data for imputation by checking the admin level shapefiles for geometric
consistency. Prior to the imputation, an algorithm is used to select an appropriate set of variables that best
predicts the outcome variable. The household survey data is used to create a synthetic census of households.
The empirical best predictor is estimated using the household survey data and is used as the basis for imputation
into the synthetic census.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">saeplus_modelunitlevel</span><span class="op">(</span></span>
<span>  <span class="va">hhsurvey_dt</span>,</span>
<span>  <span class="va">hhid_var</span>,</span>
<span>  <span class="va">size_hh</span>,</span>
<span>  <span class="va">adminshp_dt</span>,</span>
<span>  <span class="va">target_id</span>,</span>
<span>  <span class="va">geopolycensus_dt</span>,</span>
<span>  <span class="va">geopopvar</span>,</span>
<span>  geopoly_id <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  crs_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">4326</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  agr_set <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"constant"</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>  <span class="va">cand_vars</span>,</span>
<span>  <span class="va">cons_var</span>,</span>
<span>  wgt_vartype <span class="op">=</span> <span class="st">"hh"</span>,</span>
<span>  <span class="va">weight</span>,</span>
<span>  create_dummy <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">dummy_var</span>,</span>
<span>  <span class="va">aggregate_id</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  ncpu <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  pline <span class="op">=</span> <span class="fl">5006362</span>,</span>
<span>  pline_transform <span class="op">=</span> <span class="st">"inclusion_line"</span>,</span>
<span>  result_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>hhsurvey_dt</dt>
<dd><p>object of class data.frame/data.table corresponding to household survey data (unit level data)</p></dd>


<dt>hhid_var</dt>
<dd><p>the household ID variable from the hhsurvey_dt object</p></dd>


<dt>size_hh</dt>
<dd><p>an integer/numeric for household size variable within the hhsurvey_dt object</p></dd>


<dt>adminshp_dt</dt>
<dd><p>an object of class sf, data.table and/or data.frame containing administrative
level boundaries with multipolygons/polygons geometries</p></dd>


<dt>target_id</dt>
<dd><p>a character string representing an integer column vector for the admin level at which
small area estimates will be computed for the poverty map</p></dd>


<dt>geopolycensus_dt</dt>
<dd><p>an object of class sf, data.table and/or data.frame containing polygon/multipolygon
geometries and geospatial indicators</p></dd>


<dt>geopopvar</dt>
<dd><p>a character string for the population count variable name in the geopolycensus_dt</p></dd>


<dt>geopoly_id</dt>
<dd><p>a string/character variable representing the polygon ID within geopolycensus_dt</p></dd>


<dt>crs_set</dt>
<dd><p>an integer list of the coordinate reference systems for of the aforementioned objects
i.e. the CRS for hhsurvey_dt, adminshp_dt and geopolycensus_dt in this order</p></dd>


<dt>agr_set</dt>
<dd><p>a character/string list representing attribute-geometry-relationships specified for each
non-geometry attribute column and how it relates to the geometry, and can have one of following values
"constant", "aggregate" and "identity". The default is constant. See details for more. The AGR will listed
in the same order as the crs_set.</p></dd>


<dt>cand_vars</dt>
<dd><p>a character vector of candidate explanatory variables to be included in the model
selection process</p></dd>


<dt>cons_var</dt>
<dd><p>the dependent variable for small area estimation (typically household per capita consumption)</p></dd>


<dt>wgt_vartype</dt>
<dd><p>a character string representing the weighting type. The options could be "hh", "pop" i.e.
households vs population weights.</p></dd>


<dt>weight</dt>
<dd><p>a numeric/integer weight variable</p></dd>


<dt>create_dummy</dt>
<dd><p>if TRUE, a dummy variable will be created if dummy_var is specified. Variable must be from
adminshp_dt</p></dd>


<dt>dummy_var</dt>
<dd><p>a list of variables from which a dummies will be created for each level.</p></dd>


<dt>aggregate_id</dt>
<dd><p>if argument is not NULL, all cand_vars will be aggregated at the admin level specified as
the aggregate_id argument</p></dd>


<dt>...</dt>
<dd><p>include any set of arguments available within emdi::ebp() function as you see fit.</p></dd>


<dt>ncpu</dt>
<dd><p>the number of CPUs for parallelizing the small area estimation algorithm</p></dd>


<dt>pline</dt>
<dd><p>the national poverty line</p></dd>


<dt>pline_transform</dt>
<dd><p>select an order norm transformation method. There are three options. The default
inclusion_line" option adds the poverty line value stipulated to the vector of welfare vector
provided. The order norm value obtained from the normalization process is the converted value.
The "interpolation_line" option applies a linear interpolation to outcome_var to estimate a conversion
The "limsup_line" option takes the converted value of the greatest welfare value below the poverty line</p></dd>


<dt>result_dir</dt>
<dd><p>local folder directory where all tables and charts will be stored. If result_dir is not
specified, the default is the result of getwd()</p></dd>


<dt>hhsurvey_lat</dt>
<dd><p>the latitude variable within the hh_dt object</p></dd>


<dt>hhsurvey_lon</dt>
<dd><p>the longitude variable within the hh_dt object</p></dd>

</dl></div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by The package maintainer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

